
<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tappo | NFC Digitalna Rešenja</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        #protocol-warning {
            display: none;
            position: fixed;
            inset: 0;
            background: #1e1b4b;
            color: white;
            z-index: 10000;
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <div id="protocol-warning">
        <div class="max-w-md">
            <div class="bg-indigo-600 w-20 h-20 rounded-3xl mb-8 mx-auto flex items-center justify-center shadow-2xl">
                <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h1 class="text-3xl font-black mb-4 tracking-tighter uppercase">Potreban je lokalni server</h1>
            <p class="text-indigo-200 mb-8 font-medium">Moderni sajtovi zahtevaju server da bi AI i moduli radili.</p>
            <div class="bg-white/10 p-6 rounded-2xl text-left border border-white/10">
                <p class="text-xs font-black uppercase tracking-widest text-indigo-300 mb-2">Rešenje:</p>
                <ol class="text-sm space-y-2 text-indigo-100">
                    <li>1. Otvori ovaj folder u <strong>VS Code</strong>.</li>
                    <li>2. Instaliraj <strong>Live Server</strong> ekstenziju.</li>
                    <li>3. Klikni na <strong>"Go Live"</strong> dole desno.</li>
                </ol>
            </div>
        </div>
    </div>

    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.4",
    "react-dom": "https://esm.sh/react-dom@^19.2.4",
    "react-dom/client": "https://esm.sh/react-dom@^19.2.4/client",
    "htm": "https://esm.sh/htm@^3.1.1",
    "@google/genai": "https://esm.sh/@google/genai@^1.40.0",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/",
    "react/": "https://esm.sh/react@^19.2.4/"
  }
}
</script>

    <script type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import htm from 'htm';
        import { GoogleGenAI } from "@google/genai";

        // Sakrij upozorenje ako je sajt pokrenut preko servera
        if (window.location.protocol !== 'file:') {
            document.getElementById('protocol-warning').style.display = 'none';
        }

        const html = htm.bind(React.createElement);
        const ai = new GoogleGenAI({ apiKey: "YOUR_API_KEY_HERE" }); // Napomena: U produkciji ide process.env.API_KEY

        const INITIAL_PROFILE = {
            name: 'Caffe Central',
            description: 'Najbolja kafa u srcu grada. Naša tradicija duga 15 godina garantuje savršen užitak.',
            category: 'Kafić',
            location: 'Knez Mihailova 1, Beograd',
            menuGroups: [
                { id: '1', name: 'Kafa', items: [{ id: '1-1', name: 'Espresso', price: 180, desc: 'Jaka i aromatična' }] },
                { id: '2', name: 'Sokovi', items: [{ id: '2-1', name: 'Limunada', price: 250, desc: 'Sveže ceđena' }] }
            ]
        };

        const Navbar = ({ setView }) => html`
            <nav class="bg-white/80 backdrop-blur-md border-b sticky top-0 z-50">
                <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
                    <div class="flex items-center cursor-pointer" onClick=${() => setView('LANDING')}>
                        <div class="bg-indigo-600 p-2 rounded-xl mr-3">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                        </div>
                        <span class="text-2xl font-black text-indigo-600 tracking-tighter">Tappo</span>
                    </div>
                    <div class="flex gap-6 items-center">
                        <button onClick=${() => setView('DASHBOARD')} class="bg-indigo-600 text-white px-6 py-2.5 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg">Moj Lokal</button>
                    </div>
                </div>
            </nav>
        `;

        const Landing = ({ setView }) => html`
            <div class="animate-fade-in py-24 px-6 text-center">
                <h1 class="text-6xl md:text-7xl font-black text-gray-900 mb-8 tracking-tighter leading-tight">
                    NFC Meniji Za <br/> <span class="text-indigo-600">Moderne Lokale.</span>
                </h1>
                <p class="text-xl text-gray-500 mb-12 max-w-2xl mx-auto font-medium">
                    Digitalizujte svoj cenovnik. Gost tapne telefonom, vidi meni i naruči. Jednostavno, brzo i bez papira.
                </p>
                <div class="flex justify-center gap-4">
                    <button onClick=${() => setView('DASHBOARD')} class="px-10 py-5 bg-indigo-600 text-white rounded-2xl font-black text-xs uppercase tracking-widest shadow-2xl">Započni Besplatno</button>
                </div>
            </div>
        `;

        const Dashboard = ({ profile, setProfile, setView }) => html`
            <div class="animate-fade-in max-w-4xl mx-auto px-6 py-12">
                <div class="flex justify-between items-end mb-12">
                    <div>
                        <h2 class="text-4xl font-black text-gray-900 tracking-tighter">${profile.name}</h2>
                        <p class="text-indigo-600 font-black text-[10px] uppercase tracking-widest mt-1">Uređivanje Profila</p>
                    </div>
                    <button onClick=${() => setView('PREVIEW')} class="bg-white border-2 border-indigo-600 text-indigo-600 px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest">Pregledaj</button>
                </div>

                <div class="bg-white rounded-[2.5rem] p-10 shadow-sm border border-gray-100 space-y-8">
                    <div>
                        <label class="block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest">Naziv Lokala</label>
                        <input class="w-full px-6 py-4 bg-gray-50 rounded-2xl border-none focus:ring-2 focus:ring-indigo-600 outline-none font-bold" value=${profile.name} onChange=${e => setProfile({...profile, name: e.target.value})} />
                    </div>
                    <div>
                        <label class="block text-[10px] font-black uppercase text-gray-400 mb-2 tracking-widest">Opis / Slogan</label>
                        <textarea rows="3" class="w-full px-6 py-4 bg-gray-50 rounded-2xl border-none focus:ring-2 focus:ring-indigo-600 outline-none font-medium" value=${profile.description} onChange=${e => setProfile({...profile, description: e.target.value})} />
                    </div>
                    
                    <div class="pt-8 border-t border-gray-50">
                        <h3 class="text-xs font-black uppercase text-indigo-600 mb-6 tracking-widest">Cenovnik (Artikli)</h3>
                        <div class="space-y-4">
                            ${profile.menuGroups[0].items.map(it => html`
                                <div class="p-4 bg-gray-50 rounded-2xl flex justify-between items-center">
                                    <span class="font-bold text-gray-800">${it.name}</span>
                                    <span class="font-black text-indigo-600">${it.price} RSD</span>
                                </div>
                            `)}
                        </div>
                    </div>
                </div>
            </div>
        `;

        const PublicProfile = ({ profile, onBack }) => html`
            <div class="min-h-screen bg-white max-w-md mx-auto shadow-2xl pb-12 overflow-x-hidden animate-fade-in">
                <div class="relative h-64 bg-indigo-900">
                    <img src="https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800" class="w-full h-full object-cover opacity-50" />
                    <button onClick=${onBack} class="absolute top-6 left-6 bg-white/20 p-3 rounded-2xl text-white backdrop-blur-md">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <div class="absolute bottom-6 left-8 right-8 text-center">
                        <h1 class="text-4xl font-black text-gray-900 tracking-tighter">${profile.name}</h1>
                        <p class="text-gray-500 text-xs font-bold mt-2 uppercase tracking-widest italic">"${profile.description}"</p>
                    </div>
                </div>

                <div class="px-8 mt-12">
                    <h2 class="text-[10px] font-black text-indigo-600 uppercase tracking-widest mb-6 border-l-4 border-indigo-600 pl-3">Naša Ponuda</h2>
                    <div class="space-y-6">
                        ${profile.menuGroups[0].items.map(it => html`
                            <div class="flex justify-between items-baseline border-b border-gray-100 pb-4">
                                <div>
                                    <h4 class="font-black text-gray-900 text-sm uppercase">${it.name}</h4>
                                    <p class="text-[10px] text-gray-400">${it.desc}</p>
                                </div>
                                <span class="font-black text-indigo-600 text-sm">${it.price} RSD</span>
                            </div>
                        `)}
                    </div>
                </div>
            </div>
        `;

        const App = () => {
            const [view, setView] = useState('LANDING');
            const [profile, setProfile] = useState(INITIAL_PROFILE);

            return html`
                <div class="min-h-screen">
                    ${view !== 'PREVIEW' && html`<${Navbar} setView=${setView} />`}
                    <main>
                        ${view === 'LANDING' && html`<${Landing} setView=${setView} />`}
                        ${view === 'DASHBOARD' && html`<${Dashboard} profile=${profile} setProfile=${setProfile} setView=${setView} />`}
                        ${view === 'PREVIEW' && html`
                            <div class="bg-gray-100 min-h-screen py-12 px-4">
                                <${PublicProfile} profile=${profile} onBack=${() => setView('DASHBOARD')} />
                            </div>
                        `}
                    </main>
                </div>
            `;
        };

        const root = createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
